# Copyright (c) 2021-2022, Arm Limited.
#
# SPDX-License-Identifier: MIT

header:
  version: 11
  includes:
    - meta-ewaol-config/kas/second-vm-parameters.yml

# Since we use generic-arm64 as the MACHINE for the EWAOL VM we need to
# include meta-arm layer which holds its definition.
repos:
  meta-arm:
    url: https://git.yoctoproject.org/git/meta-arm
    path: layers/meta-arm
    layers:
      meta-arm: included
      meta-arm-toolchain: included

local_conf_header:
  virtualization: |
    DISTRO_FEATURES:append = " ewaol-virtualization"
  ewaol_vm: |
    BBMULTICONFIG += "${EWAOL_VM_MC}"

env:
  EWAOL_VM_INSTANCES: "1"
  EWAOL_VM1_MEMORY_SIZE: "6144"
  EWAOL_VM1_NUMBER_OF_CPUS: "4"
  EWAOL_VM1_ROOTFS_EXTRA_SPACE: ""
  EWAOL_HOST_ROOTFS_EXTRA_SPACE: "2000000"
  EWAOL_HOST_MEMORY_SIZE: "2048"

target:
  - ewaol-host-image
